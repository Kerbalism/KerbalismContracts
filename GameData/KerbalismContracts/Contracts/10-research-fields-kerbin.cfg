CONTRACT_TYPE:NEEDS[Kerbalism,FeatureRadiation]
{
  DATA_EXPAND
  {
    type = CelestialBody
    name = The Target
    theTarget = AllBodies()
  }

  targetBody = @/theTarget
  failureFunds = 5000
  rewardFunds = 10000
  advanceFunds = 15000

  name = KerbalismResearchMagneticField-Kerbin

  agent = Kerbalism
  group = Kerbalism
  title = Research the magnetic field of @/theTarget
  genericTitle = Research a magnetic field
  description = Research the magnetic field of @/theTarget
  genericDescription = Research a magnetic field
  synopsis = We don't know enough about the magnetic field of @/theTarget. Send a probe to @/theTarget and search for a magnetopause and radiation belts.
  completedMessage = Magnetic field of @/theTarget is researched.
  minExpiry = 0.0
  maxExpiry = 0.0
  deadline = 0.0
  prestige = Significant
  maxCompletions = 1
  maxSimultaneous = 5
  rewardScience = 15
  rewardReputation = 3
  failureReputation = 5

  REQUIREMENT
  {
    name = Orbit
    type = Orbit
  }

  PARAMETER
  {
    name = CompleteContract
    type = VesselParameterGroup
    title = Research the magnetic field of @/theTarget

    PARAMETER
    {
      name = RadiationSensor
      type = PartValidation
      title = Have a radiation sensor
      hideChildren = true

      FILTER
      {
        MODULE
        {
          name = Sensor
          type = radiation
        }
      }
    }

    PARAMETER
    {
      name = CanTransmitScience
      type = CanTransmitScience
      title = Can transmit science
    }

    PARAMETER
    {
      name = InnerBelt
      type = InnerBelt
      crossings_min = 5
      targetBody = @/theTarget
    }

    PARAMETER
    {
      name = OuterBelt
      type = OuterBelt
      crossings_min = 5
      targetBody = @/theTarget
    }

    PARAMETER
    {
      name = Magnetopause
      type = Magnetopause
      crossings_min = 4
      targetBody = @/theTarget
    }
  }

  BEHAVIOUR
  {
    name = RevealInnerBelt
    type = RevealInnerBelt
    targetBody = @/theTarget
  }

  BEHAVIOUR
  {
    name = RevealOuterBelt
    type = RevealOuterBelt
    targetBody = @/theTarget
  }

  BEHAVIOUR
  {
    name = RevealMagnetopause
    type = RevealMagnetopause
    targetBody = @/theTarget
  }
}
