CONTRACT_TYPE:NEEDS[Kerbalism,FeatureRadiation]
{
  targetBody = AllBodies().Where(cb => cb.IsPlanet() && !cb.HasSurface()).First().Children().ElementAt(3)
  failureFunds = 5000
  rewardFunds = 10000
  advanceFunds = 15000

  name = KerbalismResearchMagneticField-Tylo
  
  agent = Kerbalism
  group = Kerbalism
  title = Research the magnetic field of $targetBody
  genericTitle = Research a magnetic field
  description = Research the magnetic field of $targetBody
  genericDescription = Research a magnetic field
  synopsis = We don't know enough about the magnetic field of $targetBody. Send a probe to $targetBody and search for a magnetopause and radiation belts.
  completedMessage = Magnetic field of $targetBody is researched.
  minExpiry = 0.0
  maxExpiry = 0.0
  deadline = 0.0
  prestige = Significant
  maxCompletions = 1
  maxSimultaneous = 5
  rewardScience = 15
  rewardReputation = 15
  failureReputation = 5

  REQUIREMENT
  {
    name = FlyBy
    type = FlyBy
  }

  PARAMETER
  {
    name = CompleteContract
    type = VesselParameterGroup
    title = Research the magnetic field of $targetBody

    PARAMETER
    {
      name = RadiationSensor
      type = PartValidation
      title = Have a radiation sensor
      hideChildren = true

      FILTER
      {
        MODULE
        {
          name = Sensor
          type = radiation
        }
      }
    }

    PARAMETER
    {
      name = CanTransmitScience
      type = CanTransmitScience
      title = Can transmit science
    }

    PARAMETER
    {
      name = InnerBelt
      type = InnerBelt
      crossings = 5
    }

    PARAMETER
    {
      name = OuterBelt
      type = OuterBelt
      crossings = 5
    }

    PARAMETER
    {
      name = Magnetopause
      type = Magnetopause
      crossings = 4
    }
  }

  BEHAVIOUR
  {
    name = RevealInnerBelt
    type = RevealInnerBelt
  }

  BEHAVIOUR
  {
    name = RevealOuterBelt
    type = RevealOuterBelt
  }

  BEHAVIOUR
  {
    name = RevealMagnetopause
    type = RevealMagnetopause
  }
}
